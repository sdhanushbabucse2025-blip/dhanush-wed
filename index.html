<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title> Online-shopping (Single file)</title>

  <style>
    :root{--accent:#0066cc;--muted:#666}
    *{box-sizing:border-box}
    body{font-family:Inter, system-ui, Arial;margin:0;background:#f5f7fb;color:#111}
    header{background:white;box-shadow:0 2px 6px rgba(10,10,10,.05);position:sticky;top:0;z-index:10}
    .container{max-width:1100px;margin:0 auto;padding:1rem}
    nav{display:flex;align-items:center;justify-content:space-between}
    .logo{font-weight:700;color:var(--accent)}
    .menu{display:flex;gap:1rem}
    a.menu-item{color:var(--muted);text-decoration:none;padding:.6rem .8rem;border-radius:6px}
    a.menu-item:hover{background:#eef3fb;color:var(--accent)}

    .hero{padding:2rem 0;text-align:center}
    .grid{display:grid;gap:1rem}
    .two-col{grid-template-columns:1fr 320px}

    /* product cards */
    .products{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:1rem}
    .card{background:white;border-radius:10px;padding:1rem;box-shadow:0 6px 18px rgba(11,22,50,.06)}
    .card img{width:100%;height:140px;object-fit:cover;border-radius:8px}
    .btn{display:inline-block;padding:.5rem .8rem;border-radius:8px;border:0;background:var(--accent);color:white;cursor:pointer}
    .btn.ghost{background:transparent;color:var(--accent);border:1px solid #d9e6fb}

    /* forms */
    form{display:flex;flex-direction:column;gap:.6rem}
    input,textarea,select{padding:.6rem;border:1px solid #dfe7f3;border-radius:6px}
    label{font-size:.9rem;color:var(--muted)}
    .muted{color:var(--muted);font-size:.9rem}

    /* lists */
    .list{display:flex;flex-direction:column;gap:.6rem}
    .list-item{background:#fff;padding:.6rem;border-radius:8px;display:flex;justify-content:space-between;align-items:center}

    footer{margin-top:2rem;padding:1rem 0;text-align:center;color:var(--muted)}

    @media (max-width:800px){.two-col{grid-template-columns:1fr}
      nav .menu{display:none}
    }
  </style>
</head>
<body>
<header>
  <div class="container">
    <nav>
      <div class="logo">ShopMate</div>
      <div class="menu">
        <a class="menu-item" href="#home">Home</a>
        <a class="menu-item" href="#products">Products</a>
        <a class="menu-item" href="#contact">Contact Us</a>
        <a class="menu-item" href="#about">About Us</a>
      </div>
      <div style="display:flex;gap:.5rem;align-items:center">
        <button class="btn ghost" id="btn-register">Register</button>
        <button class="btn" id="btn-login">Login</button>
      </div>
    </nav>
  </div>
</header>
<main class="container">
  <section id="home" class="hero">
    <h1>Assignment 3 — E-Commerce Portal (Demo)</h1>
    <p class="muted">Simple single-file implementation — stores data locally in your browser (localStorage).</p>
  </section>

  <section class="grid two-col">
    <div>
      <section id="products">
        <h2>Products</h2>
        <div id="product-list" class="products"></div>
      </section>

      <section style="margin-top:1rem">
        <h3>Product Reviews & Comments</h3>
        <div id="reviews-area" class="card">
          <div id="reviews-list" class="list"></div>
        </div>
      </section>
    </div>

    <aside>
      <div class="card">
        <h3>Wishlist</h3>
        <div id="wishlist" class="list"></div>
      </div>

      <div class="card" style="margin-top:1rem">
        <h3>Orders</h3>
        <div id="orders" class="list"></div>
      </div>

      <div class="card" style="margin-top:1rem">
        <h3>Customer Care</h3>
        <form id="care-form">
          <label>Name <input id="care-name" required></label>
          <label>Email <input id="care-email" type="email" required></label>
          <label>Message <textarea id="care-message" rows="3" required></textarea></label>
          <div style="display:flex;gap:.6rem"><button class="btn" type="submit">Send</button><button type="button" class="btn ghost" id="view-care">View</button></div>
        </form>
        <div id="care-list" style="margin-top:.6rem;display:none"></div>
      </div>

      <div class="card" style="margin-top:1rem">
        <h3>Reports</h3>
        <p class="muted">Report a product problem or page issue.</p>
        <form id="report-form">
          <label>Issue <input id="report-issue" required></label>
          <label>Details <textarea id="report-details" rows="2" required></textarea></label>
          <button class="btn" type="submit">Report</button>
        </form>
        <div id="report-list" style="margin-top:.6rem;display:none"></div>
      </div>
    </aside>
  </section>

  <section id="contact" style="margin-top:1rem">
    <h2>Contact Us</h2>
    <p class="muted">Email: citonlineshoping@gmail.com | Phone: +91-8122440734</p>
  </section>

  <section id="about" style="margin-top:1rem">
    <h2>About Us</h2>
    <p class="muted">This is a demo front-end application for educational purposes only.</p>
  </section>

  <footer>
    <small>Built for Assignment 3 • Data stored in localStorage of your browser</small>
  </footer>
</main>

<!-- Registration & Login Modals (simple) -->
<div id="modal" style="position:fixed;inset:0;display:none;align-items:center;justify-content:center;padding:1rem">
  <div style="background:white;padding:1rem;border-radius:10px;max-width:420px;width:100%;box-shadow:0 20px 50px rgba(0,0,0,.2)">
    <div id="modal-content"></div>
    <div style="text-align:right;margin-top:.6rem"><button class="btn ghost" id="modal-close">Close</button></div>
  </div>
</div>

<script>
// --- Sample product data (would normally come from a server) ---
// --- Sample product data (would normally come from a server) ---
const sampleProducts = [
  {
    id: 1,
    title: 'Wireless Headphones',
    price: 2499,
    img: '<a href="https://pikbest.com/templates/wireless-headphone-website-hero-banner-and-landing-page-ui-design_11827161.html">Free  templates from pikbest.com</a>'
  },
  {
    id: 2,
    title: 'Smart Watch (Noise Pulse 4 Max)',
    price: 3499,
    img: 'https://cdn.shopify.com/s/files/1/0997/6284/products/ColorFit-Pulse-4-Max.png?v=1712059605'
  },
  {
    id: 3,
    title: 'Bluetooth Speaker',
    price: 1299,
    img: 'https://m.media-amazon.com/images/I/71t7bS0E5BL._AC_SL1500_.jpg'
  },
  {
    id: 4,
    title: 'DSLR Camera',
    price: 45999,
    img: 'https://m.media-amazon.com/images/I/81S9P0RHV7L._AC_SL1500_.jpg'
  },
  {
    id: 5,
    title: 'Gaming Mouse',
    price: 999,
    img: 'https://m.media-amazon.com/images/I/61N6K6m2oHL._AC_SL1500_.jpg'
  }
];


// --- LocalStorage helpers ---
const ls = {get:(k, fallback)=>{try{return JSON.parse(localStorage.getItem(k))||fallback}catch(e){return fallback}}, set:(k,v)=>localStorage.setItem(k,JSON.stringify(v))};

// initialize data
if(!ls.get('products',null)) ls.set('products', sampleProducts);
if(!ls.get('users',null)) ls.set('users', []);
if(!ls.get('wishlist',null)) ls.set('wishlist', []);
if(!ls.get('orders',null)) ls.set('orders', []);
if(!ls.get('reviews',null)) ls.set('reviews', {});
if(!ls.get('care',null)) ls.set('care', []);
if(!ls.get('reports',null)) ls.set('reports', []);

// UI elements
const productListEl = document.getElementById('product-list');
const wishlistEl = document.getElementById('wishlist');
const ordersEl = document.getElementById('orders');
const reviewsListEl = document.getElementById('reviews-list');

let currentUser = ls.get('currentUser', null);

function renderProducts(){
  const products = ls.get('products', []);
  productListEl.innerHTML = '';
  products.forEach(p=>{
    const div = document.createElement('div'); div.className='card';
    div.innerHTML = `
      <img src="${p.img}" alt="${p.title}">
      <h4>${p.title}</h4>
      <p class="muted">₹ ${p.price}</p>
      <div style="display:flex;gap:.5rem;margin-top:.4rem">
        <button class="btn" data-buy="${p.id}">Buy</button>
        <button class="btn ghost" data-wish="${p.id}">Wishlist</button>
        <button class="btn ghost" data-review="${p.id}">Review</button>
      </div>
    `;
    productListEl.appendChild(div);
  });
}

function renderWishlist(){
  const wishlist = ls.get('wishlist', []);
  wishlistEl.innerHTML = '';
  if(!wishlist.length) {wishlistEl.innerHTML='<div class="muted">No items in wishlist</div>';return}
  wishlist.forEach(id=>{
    const p = ls.get('products',[]).find(x=>x.id===id);
    const item = document.createElement('div'); item.className='list-item';
    item.innerHTML = `<div>${p.title} <div class="muted">₹ ${p.price}</div></div><div><button class="btn" data-buy="${p.id}">Buy</button> <button class="btn ghost" data-rem="${p.id}">Remove</button></div>`;
    wishlistEl.appendChild(item);
  })
}

function renderOrders(){
  const orders = ls.get('orders', []);
  ordersEl.innerHTML = '';
  if(!orders.length){ordersEl.innerHTML='<div class="muted">No orders yet</div>';return}
  orders.forEach(o=>{
    const p = ls.get('products',[]).find(x=>x.id===o.productId);
    const item = document.createElement('div'); item.className='list-item';
    item.innerHTML = `<div>${p.title}<div class="muted">Ordered by ${o.user} • ₹ ${p.price}</div></div><div class="muted">${new Date(o.when).toLocaleString()}</div>`;
    ordersEl.appendChild(item);
  })
}

function renderReviews(){
  const reviews = ls.get('reviews', {});
  reviewsListEl.innerHTML = '';
  const keys = Object.keys(reviews).sort((a,b)=>b-a);
  if(!keys.length) {reviewsListEl.innerHTML='<div class="muted">No reviews yet</div>';return}
  keys.forEach(pid=>{
    const p = ls.get('products',[]).find(x=>x.id==pid);
    reviews[pid].forEach(r=>{
      const div = document.createElement('div'); div.className='list-item';
      div.innerHTML = `<div><strong>${p.title}</strong><div class="muted">${r.user} • ${new Date(r.when).toLocaleString()}</div><div>${r.text}</div></div>`;
      reviewsListEl.appendChild(div);
    })
  })
}

// event delegation
document.body.addEventListener('click', e=>{
  if(e.target.matches('[data-wish]')){
    const id = +e.target.dataset.wish; let wishlist = ls.get('wishlist',[]);
    if(!wishlist.includes(id)) {wishlist.push(id); ls.set('wishlist', wishlist); renderWishlist(); alert('Added to wishlist')}
    else {alert('Already in wishlist')}
  }
  if(e.target.matches('[data-rem]')){
    const id = +e.target.dataset.rem; let wishlist = ls.get('wishlist',[]); wishlist = wishlist.filter(x=>x!==id); ls.set('wishlist',wishlist); renderWishlist();
  }
  if(e.target.matches('[data-buy]')){
    const id = +e.target.dataset.buy;
    if(!currentUser){alert('Please login to place order'); showLogin(); return}
    const orders = ls.get('orders',[]);
    orders.push({productId:id,user:currentUser.email,when:Date.now()}); ls.set('orders',orders); renderOrders(); alert('Order placed')
  }
  if(e.target.matches('[data-review]')){
    const id = +e.target.dataset.review; showReviewModal(id);
  }
});

// Registration & Login
const modal = document.getElementById('modal');
const modalContent = document.getElementById('modal-content');
const btnRegister = document.getElementById('btn-register');
const btnLogin = document.getElementById('btn-login');
const modalClose = document.getElementById('modal-close');

btnRegister.addEventListener('click', ()=>showRegister());
btnLogin.addEventListener('click', ()=>showLogin());
modalClose.addEventListener('click', ()=>modal.style.display='none');

function showRegister(){
  modalContent.innerHTML = `
    <h3>Register</h3>
    <form id="reg-form">
      <label>Full name <input id="reg-name" required></label>
      <label>Email <input id="reg-email" type="email" required></label>
      <label>Password <input id="reg-pass" type="password" required></label>
      <small class="muted">Password must be 8+ chars, include letters and numbers</small>
      <div style="display:flex;gap:.6rem;margin-top:.4rem"><button class="btn" type="submit">Create Account</button></div>
    </form>
  `; modal.style.display='flex';
  document.getElementById('reg-form').addEventListener('submit', e=>{
    e.preventDefault(); const name=document.getElementById('reg-name').value.trim(); const email=document.getElementById('reg-email').value.trim(); const pass=document.getElementById('reg-pass').value;
    // basic validation
    if(name.length<3){alert('Enter a valid name');return}
    if(!/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(email)){alert('Enter a valid email');return}
    if(!/^(?=.*[A-Za-z])(?=.*\d).{8,}$/.test(pass)){alert('Password must be 8+ chars and include letters and numbers');return}
    const users = ls.get('users',[]);
    if(users.find(u=>u.email===email)){alert('User already exists');return}
    users.push({name,email,password:pass}); ls.set('users',users); alert('Registration successful — please login'); modal.style.display='none';
  })
}

function showLogin(){
  modalContent.innerHTML = `
    <h3>Login</h3>
    <form id="login-form">
      <label>Email <input id="login-email" type="email" required></label>
      <label>Password <input id="login-pass" type="password" required></label>
      <div style="display:flex;gap:.6rem;margin-top:.4rem"><button class="btn" type="submit">Login</button></div>
    </form>
  `; modal.style.display='flex';
  document.getElementById('login-form').addEventListener('submit', e=>{
    e.preventDefault(); const email=document.getElementById('login-email').value.trim(); const pass=document.getElementById('login-pass').value;
    const users = ls.get('users',[]);
    const user = users.find(u=>u.email===email && u.password===pass);
    if(!user){alert('Invalid credentials');return}
    currentUser = {email:user.email,name:user.name}; ls.set('currentUser',currentUser); modal.style.display='none'; alert('Logged in as '+user.name);
  })
}

function showLoginPrompt(){ alert('Please login to continue'); showLogin(); }

function showReviewModal(productId){
  const p = ls.get('products',[]).find(x=>x.id===productId);
  modalContent.innerHTML = `
    <h3>Review — ${p.title}</h3>
    <form id="rev-form">
      <label>Your comment <textarea id="rev-text" rows="3" required></textarea></label>
      <div style="display:flex;gap:.6rem;margin-top:.4rem"><button class="btn" type="submit">Submit review</button></div>
    </form>
  `; modal.style.display='flex';
  document.getElementById('rev-form').addEventListener('submit', e=>{
    e.preventDefault(); if(!ls.get('currentUser',null)){alert('Please login to leave a review'); return}
    const text = document.getElementById('rev-text').value.trim(); if(!text) return;
    const reviews = ls.get('reviews', {});
    if(!reviews[productId]) reviews[productId]=[];
    reviews[productId].push({text,user:ls.get('currentUser').email,when:Date.now()}); ls.set('reviews',reviews); modal.style.display='none'; renderReviews();
  })
}

// Customer care & reports
const careForm = document.getElementById('care-form');
const careList = document.getElementById('care-list');
const viewCare = document.getElementById('view-care');
careForm.addEventListener('submit', e=>{e.preventDefault(); const name=document.getElementById('care-name').value.trim(); const email=document.getElementById('care-email').value.trim(); const msg=document.getElementById('care-message').value.trim(); const care = ls.get('care',[]); care.push({name,email,msg,when:Date.now()}); ls.set('care',care); alert('Message sent — support will contact you'); careForm.reset();})
viewCare.addEventListener('click', ()=>{ const care = ls.get('care',[]); careList.style.display='block'; careList.innerHTML = care.map(c=>`<div class="card" style="margin:.4rem 0;padding:.6rem"><strong>${c.name}</strong> <div class="muted">${c.email} • ${new Date(c.when).toLocaleString()}</div><div>${c.msg}</div></div>`).join('') })

const reportForm = document.getElementById('report-form');
const reportList = document.getElementById('report-list');
reportForm.addEventListener('submit', e=>{e.preventDefault(); const issue=document.getElementById('report-issue').value.trim(); const details=document.getElementById('report-details').value.trim(); const reports = ls.get('reports',[]); reports.push({issue,details,when:Date.now()}); ls.set('reports',reports); alert('Report submitted'); reportForm.reset();})

// initial render
renderProducts(); renderWishlist(); renderOrders(); renderReviews();

// small helper to show login
function showLogin(){ showLogin(); }

// expose showLogin for use in some flows
window.showLogin = showLogin;

</script>
</body>
</html>
